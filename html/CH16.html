<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>圖模型與結構化機率模型</title>
    <script src="https://cdn.tailwindcss.com/3.4.3"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script type="importmap">
      {
        "imports": {
          "framer-motion": "https://esm.sh/framer-motion@11.2.10"
        }
      }
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #1d1d1f; /* File D: Apple's dark grey */
            color: #f5f5f7; /* File D: Apple's light text */
            overflow-x: hidden;
        }

        .bento-grid {
            display: grid;
            gap: 1.5rem; 
            padding: 1.5rem; 
            max-width: 1280px; 
            margin: 0 auto;
        }

        .bento-item {
            background-color: #2c2c2e; /* File D: Apple's slightly lighter dark grey */
            border-radius: 1.5rem; 
            padding: 1.5rem; 
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            opacity: 0; /* Initial state for animation */
        }
        .bento-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1),0 10px 10px -5px rgba(0,0,0,0.04);
        }
        
        /* Typography */
        h1, h2, h3, h4 { font-weight: 600; color: #f5f5f7; }

        .page-main-title { /* For main H1 from File D */
            font-size: clamp(2.8rem, 5vw, 4.5rem); /* File D large-text */
            line-height: 1.1;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            background-image: linear-gradient(to right, #63e6f6, #f472b6); /* File D gradient */
            opacity: 0;
        }
        .page-main-title a {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            background-image: linear-gradient(to right, #63e6f6, #f472b6);
            text-decoration: none;
        }
        .page-main-title a:hover {
             background-image: linear-gradient(to right, #22d3ee, #ec4899);
        }

        .page-sub-title { /* For sub H1 from File D */
            font-size: 1.25rem; /* text-xl */
            color: #a0aec0; /* text-slate-400 like */
            opacity: 0;
        }
        
        .section-hero-title { /* For File C's hero section title */
            font-size: 2.5rem; /* File C chinese-title */
            font-weight: 700;
            line-height: 1.2;
            color: #f5f5f7; /* Adapted for dark theme */
            opacity: 0;
        }
        .section-hero-english { /* File C english-text */
            font-size: 1.25rem; /* Adapted */
            color: #a0aec0; /* Adapted */
            opacity: 0;
        }
        .section-hero-presenter {
            font-size: 1rem;
            color: #a0aec0; /* Adapted */
            opacity: 0;
        }

        .item-title-main { /* For H2/H3 in items */
            font-size: 1.5rem; /* File C chinese-subtitle */
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .item-title-sub-eng { /* For English sub-captions */
            font-size: 0.9rem;
            color: #a0aec0; /* File C english-text adapted */
            margin-bottom: 0.75rem;
        }
        .item-text-primary {
            color: #d1d5db; /* text-slate-300 like */
            font-size: 0.95rem;
            line-height: 1.6;
        }
        .item-text-secondary {
            color: #9ca3af; /* text-slate-400 like */
            font-size: 0.875rem;
        }

        /* Highlights */
        .highlight-cyan-bg { /* File D */
            background: linear-gradient(135deg, rgba(0, 223, 252, 0.2) 0%, rgba(0, 223, 252, 0.05) 100%);
        }
        .highlight-pink-bg { /* File D */
            background: linear-gradient(135deg, rgba(244, 114, 182, 0.2) 0%, rgba(244, 114, 182, 0.05) 100%);
        }
        .highlight-blue-gradient { /* File C, adapted for dark */
             background: linear-gradient(135deg, rgba(0, 122, 255, 0.25) 0%, rgba(0, 122, 255, 0.1) 100%);
        }
        .highlight-green-gradient { /* File C, adapted for dark */
            background: linear-gradient(135deg, rgba(52, 199, 89, 0.25) 0%, rgba(52, 199, 89, 0.1) 100%);
        }
        .highlight-orange-gradient { /* File C, adapted for dark */
            background: linear-gradient(135deg, rgba(255, 149, 0, 0.25) 0%, rgba(255, 149, 0, 0.1) 100%);
        }
        .text-highlight { /* Generic text highlight color for links etc. */
            color: #63e6f6; /* File D highlight-cyan */
        }
        .text-highlight:hover { text-decoration: underline; }

        /* Formula & Code Blocks */
        .formula-block { /* Standardized from File C code-block & File D equation */
            background-color: #353538; /* Darker than bento, from File C code-block #2d2d2d but a bit lighter */
            color: #e0e0e0; /* File C code-block #f0f0f0 */
            padding: 1rem;
            border-radius: 8px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            font-size: 0.9em;
            overflow-x: auto;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            white-space: pre; /* File D equation */
            border: 1px solid #4a4a4e;
        }

        /* Icons */
        .icon-style { margin-right: 0.5rem; color: #63e6f6; } /* General icon style */

        /* Table Styling */
        .table-custom {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            font-size: 0.8rem; /* Smaller for dense tables */
        }
        .table-custom th, .table-custom td {
            border: 1px solid #4a5568; 
            padding: 0.5rem; 
            text-align: left;
            color: #d1d5db; /* Adapted text color */
        }
        .table-custom th {
            background-color: rgba(74, 85, 104, 0.5); /* #4a5568 with alpha */
            font-weight: bold;
            color: #f5f5f7;
        }

        /* Graph/SVG Styling */
        .svg-diagram { /* File D */
            width: 100%;
            height: auto;
            max-height: 250px; /* Adjusted */
            stroke: #a0aec0; 
            stroke-width: 1.5;
            fill: none;
        }
        .svg-diagram text {
            fill: #f5f5f7;
            font-size: 11px; /* Adjusted */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .svg-diagram .node { fill: #4a5568; stroke: #718096; }
        .svg-diagram .observed-node { fill: #2c2c2e; stroke: #63e6f6; }
        .svg-diagram .edge { stroke: #718096; }
        
        .graph-node { /* File C style, adapted */
            min-width: 50px; height: 50px; /* Adjusted */
            border: 2px solid #63e6f6; /* Adapted color */
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: 500; color: #1d1d1f; /* Text inside node needs to be dark */
            background-color: #e0e0e0; /* Light background for node to make text readable */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 0.8rem; /* Added */
        }
        .graph-factor-node { /* File C style, adapted */
            min-width: 40px; height: 40px; /* Adjusted */
            border: 2px solid #34d399; /* Adapted green */
            border-radius: 8px; 
            display: flex; align-items: center; justify-content: center;
            font-weight: 500; color: #1d1d1f; /* Dark text */
            background-color: #e0e0e0; /* Light background */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 0.8rem; /* Added */
        }
        .graph-edge { stroke: #a0aec0; stroke-width: 2; } /* File C */
        .graph-arrow { fill: #a0aec0; } /* File C */


        /* Grid layout definitions */
        @media (min-width: 768px) { /* md */
            .bento-grid { grid-template-columns: repeat(4, 1fr); }
            .bento-item.md-col-span-1 { grid-column: span 1 / span 1; }
            .bento-item.md-col-span-2 { grid-column: span 2 / span 2; }
            .bento-item.md-col-span-3 { grid-column: span 3 / span 3; }
            .bento-item.md-col-span-4 { grid-column: span 4 / span 4; }
            .bento-item.md-row-span-1 { grid-row: span 1 / span 1; }
            .bento-item.md-row-span-2 { grid-row: span 2 / span 2; }
        }
        @media (min-width: 1024px) { /* lg */
            .bento-item.lg-col-span-1 { grid-column: span 1 / span 1; }
            .bento-item.lg-col-span-2 { grid-column: span 2 / span 2; }
            .bento-item.lg-col-span-3 { grid-column: span 3 / span 3; }
            .bento-item.lg-col-span-4 { grid-column: span 4 / span 4; }
            .bento-item.lg-row-span-1 { grid-row: span 1 / span 1; }
            .bento-item.lg-row-span-2 { grid-row: span 2 / span 2; }
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="container mx-auto px-4 py-8">
        <header class="py-12 px-6 text-center">
            <h1 class="page-main-title">
                <a href="https://deep-learning-101.github.io/" target="_blank" rel="noopener noreferrer">
                    圖模型概念回顧
                </a>
            </h1>
            <p class="page-sub-title">
                Graph Model Concept Review & Connections to Deep Learning
            </p>
        </header>

        <main class="bento-grid">
            <section class="bento-item md-col-span-2 lg-col-span-2" data-custom="0">
                <h2 class="item-title-main"><i class="fas fa-link icon-style"></i>聯合機率</h2>
                <p class="item-title-sub-eng">Joint Probability</p>
                <p class="item-text-secondary mb-2">節點同時出現的機率。The probability of nodes which appear at the same time.</p>
                <div class="formula-block">p(x<sub>p</sub>, x<sub>t</sub>, x<sub>r</sub>, x<sub>y</sub>) = p(x<sub>p</sub>|x<sub>t</sub>)p(x<sub>t</sub>|x<sub>r</sub>)p(x<sub>r</sub>)p(x<sub>y</sub>)</div>
                <p class="item-text-primary text-sm">此為貝氏網路中常見的因子分解範例。This is a common factorization example in Bayesian Networks.</p>
            </section>

            <section class="bento-item md-col-span-2 lg-col-span-2" data-custom="1">
                <h2 class="item-title-main"><i class="fas fa-compress-arrows-alt icon-style"></i>邊際機率</h2>
                <p class="item-title-sub-eng">Marginal Probability</p>
                <p class="item-text-secondary mb-2">隨機變數集合的子集的機率分佈。A subset of a collection of random variables is the probability distribution of the variables contained in the subset.</p>
                <div class="formula-block">p(x<sub>g</sub>) = Σ<sub>x<sub>p</sub>,x<sub>t</sub>,x<sub>r</sub>,x<sub>y</sub></sub> p(x<sub>p</sub>,x<sub>t</sub>,x<sub>r</sub>,x<sub>y</sub>)</div>
                <p class="item-text-primary text-sm">計算邊際機率時，若節點數量增加，計算複雜度會呈指數級增長。</p>
                <p class="item-text-primary text-sm mt-2">估計變數 x<sub>h</sub>: 計算 p(x<sub>h</sub>) 的最大值 <code>=&gt; arg max<sub>x<sub>h</sub></sub> p(x<sub>h</sub>)</code></p>
            </section>

            <section class="bento-item md-col-span-4 lg-col-span-4 md-row-span-2 highlight-cyan-bg" data-custom="2">
                <h2 class="item-title-main text-3xl"><i class="fas fa-project-diagram icon-style"></i>馬可夫隨機場 (MRF)</h2>
                <p class="item-title-sub-eng">Markov Random Field</p>
                <p class="item-text-primary text-lg mb-4">一種無向圖模型。An undirected graph model.</p>
                <div class="flex flex-col md:flex-row items-center gap-4">
                    <div class="w-full md:w-1/2">
                        <svg viewBox="0 0 400 200" class="svg-diagram">
                            <circle cx="50" cy="100" r="15" class="node observed-node" id="y1"/> <text x="45" y="105">y1</text>
                            <circle cx="100" cy="100" r="15" class="node" id="x1"/> <text x="95" y="105">x1</text>
                            <circle cx="100" cy="50" r="15" class="node observed-node" id="y2"/> <text x="95" y="55">y2</text>
                            <circle cx="150" cy="100" r="15" class="node" id="x2"/> <text x="145" y="105">x2</text>
                            <circle cx="200" cy="100" r="15" class="node" id="x3"/> <text x="195" y="105">x3</text>
                            <circle cx="250" cy="50" r="15" class="node observed-node" id="y3"/> <text x="245" y="55">y3</text>
                            <circle cx="250" cy="150" r="15" class="node observed-node" id="y4"/> <text x="245" y="155">y4</text>
                            <circle cx="300" cy="100" r="15" class="node" id="x4"/> <text x="295" y="105">x4</text>
                            <circle cx="350" cy="100" r="15" class="node" id="x5"/> <text x="345" y="105">x5</text>
                            <circle cx="350" cy="50" r="15" class="node observed-node" id="y5"/> <text x="345" y="55">y5</text>
                            <line x1="50" y1="100" x2="100" y2="100" class="edge"/> <text x="70" y="90">Φ1</text>
                            <line x1="100" y1="50" x2="100" y2="100" class="edge"/> <text x="105" y="75">Φ2</text>
                            <line x1="100" y1="100" x2="150" y2="100" class="edge"/> <text x="120" y="90">Ψ12</text>
                            <line x1="150" y1="100" x2="200" y2="100" class="edge"/> <text x="170" y="90">Ψ23</text>
                            <line x1="200" y1="100" x2="250" y2="50" class="edge"/> <text x="220" y="70">Ψ3y3</text>
                            <line x1="200" y1="100" x2="250" y2="150" class="edge"/> <text x="220" y="130">Ψ3y4</text>
                            <line x1="200" y1="100" x2="300" y2="100" class="edge"/> <text x="245" y="90">Ψ34</text>
                            <line x1="300" y1="100" x2="350" y2="100" class="edge"/> <text x="320" y="90">Ψ45</text>
                            <line x1="350" y1="50" x2="350" y2="100" class="edge"/> <text x="355" y="75">Φ5</text>
                        </svg>
                    </div>
                    <div class="w-full md:w-1/2 item-text-primary">
                        <p class="mb-1">x<sub>1</sub>..x<sub>5</sub>: 隱藏變數. y<sub>i</sub>: 觀測節點/潛在函數.</p>
                        <p class="mb-3">邊代表節點間的聯合機率。</p>
                        <p class="text-sm font-semibold mb-1">聯合機率公式:</p>
                        <div class="formula-block text-xs">p(x<sub>1</sub>,...,x<sub>n</sub>) = (1/Z) Π<sub>c</sub>Φ<sub>c</sub>(x<sub>c</sub>) Π<sub>(i,j)</sub>Ψ<sub>ij</sub>(x<sub>i</sub>,x<sub>j</sub>)</div>
                        <p class="text-xs mt-1">Z: 歸一化常數. Φ<sub>c</sub>(x<sub>c</sub>): clique potential. Ψ<sub>ij</sub>(x<sub>i</sub>,x<sub>j</sub>): pairwise potential.</p>
                    </div>
                </div>
            </section>

            <section class="bento-item md-col-span-2 lg-col-span-2" data-custom="3">
                <h2 class="item-title-main"><i class="fas fa-exchange-alt icon-style"></i>信念傳播 (BP)</h2>
                <p class="item-title-sub-eng">Belief Propagation</p>
                <ul class="list-disc list-inside item-text-primary space-y-1 text-sm">
                    <li>取代 MRF 的邊際機率直接計算。</li>
                    <li>MRF 的近似計算方法。</li>
                    <li>基於節點間的交互作用更新所有 MRF 狀態。</li>
                    <li>遞迴計算每個節點的信念值 (belief)。</li>
                    <li>訊息 m<sub>ji</sub>(x<sub>i</sub>) 從 x<sub>j</sub> 傳遞到 x<sub>i</sub>。信念 b<sub>i</sub>(x<sub>i</sub>) 是 x<sub>i</sub> 的聯合機率。</li>
                </ul>
            </section>

            <section class="bento-item md-col-span-2 lg-col-span-2 md-row-span-2 highlight-pink-bg" data-custom="4">
                <h2 class="item-title-main text-3xl"><i class="fas fa-atom icon-style"></i>波茲曼機 (BM)</h2>
                <p class="item-title-sub-eng">Boltzmann Machine</p>
                <p class="item-text-primary text-lg mb-2">包含可見層和隱藏層的神經網路。</p>
                 <div class="flex justify-center mb-4">
                    <svg viewBox="0 0 200 150" class="svg-diagram" style="max-height: 120px;">
                        <circle cx="50" cy="100" r="10" class="node observed-node"/> <text x="45" y="120">v1</text>
                        <circle cx="100" cy="100" r="10" class="node observed-node"/> <text x="95" y="120">v2</text>
                        <circle cx="150" cy="100" r="10" class="node observed-node"/> <text x="142" y="120">...</text>
                        <circle cx="50" cy="50" r="10" class="node"/> <text x="45" y="40">h1</text>
                        <circle cx="100" cy="50" r="10" class="node"/> <text x="95" y="40">h2</text>
                        <circle cx="150" cy="50" r="10" class="node"/> <text x="142" y="40">...</text>
                        <line x1="50" y1="100" x2="50" y2="50" class="edge"/><line x1="50" y1="100" x2="100" y2="50" class="edge"/><line x1="50" y1="100" x2="150" y2="50" class="edge"/>
                        <line x1="100" y1="100" x2="50" y2="50" class="edge"/><line x1="100" y1="100" x2="100" y2="50" class="edge"/><line x1="100" y1="100" x2="150" y2="50" class="edge"/>
                        <line x1="150" y1="100" x2="50" y2="50" class="edge"/><line x1="150" y1="100" x2="100" y2="50" class="edge"/><line x1="150" y1="100" x2="150" y2="50" class="edge"/>
                    </svg>
                </div>
                <h3 class="item-title-main mt-3 mb-2">受限波茲曼機 (RBM)</h3>
                <ul class="list-disc list-inside item-text-primary space-y-1 text-sm">
                    <li>對數線性馬可夫隨機場。僅單層潛在變數。</li>
                    <li>限制：層內無連接。層間連接由矩陣描述。</li>
                    <li>能量函數 E(v,h) = -a<sup>T</sup>v - b<sup>T</sup>h - h<sup>T</sup>Wv</li>
                    <li>機率 p(v,h) = (1/Z)e<sup>-E(v,h)</sup></li>
                </ul>
            </section>
            
            <section class="bento-item md-col-span-2 lg-col-span-2" data-custom="5">
                <h2 class="item-title-main"><i class="fas fa-cogs icon-style"></i>RBM 訓練</h2>
                <p class="item-title-sub-eng">RBM Training</p>
                <p class="item-text-secondary mb-2">目標：最大化分配給訓練集的機率乘積: <code>arg max<sub>W</sub> Π<sub>v∈V</sub> p(v)</code></p>
                <p class="item-text-primary text-sm">常用方法：對比散度 (Contrastive Divergence, G. Hinton)。</p>
                 <ol class="list-decimal list-inside item-text-primary space-y-1 text-xs mt-2">
                    <li>取訓練樣本 v<sub>0</sub>，計算隱藏單元機率，抽樣隱藏激活 k。</li>
                    <li>計算 v<sub>0</sub>k<sup>T</sup> (正梯度)。</li>
                    <li>從 k 重建 v' (可見)，再從 v' 重抽樣 k' (隱藏) (Gibbs sampling step)。</li>
                    <li>計算 v'k'<sup>T</sup> (負梯度)。</li>
                    <li>更新權重 W 及偏差 a, b。</li>
                </ol>
            </section>

            <section class="md-col-span-4 lg-col-span-4 text-center py-8 my-4" data-custom="6">
                <i class="fas fa-project-diagram fa-3x text-highlight mb-4"></i>
                <h1 class="section-hero-title">結構化機率模型於深度學習</h1>
                <p class="section-hero-english">Structured Probabilistic Models for Deep Learning</p>
                <p class="section-hero-presenter mt-2">章節 16 (Chapter 16) - 主講人: Johnson</p>
            </section>

            <section class="bento-item md-col-span-2 lg-col-span-2" data-custom="7">
                <h2 class="item-title-main"><i class="fas fa-list-alt icon-style"></i>議程</h2>
                <p class="item-title-sub-eng">Agenda (Chapter 16)</p>
                <ul class="list-disc list-inside space-y-2 item-text-primary">
                    <li><strong class="font-semibold">PGM 表示法</strong> <span class="item-text-secondary">(PGM representation)</span></li>
                    <li><strong class="font-semibold">PGM 學習與推論</strong> <span class="item-text-secondary">(PGM learning and inference)</span></li>
                    <li><strong class="font-semibold">深度學習 vs. PGM</strong> <span class="item-text-secondary">(DL vs PGM) - 以波茲曼機為例</span></li>
                </ul>
            </section>

            <section class="bento-item md-col-span-2 lg-col-span-2" data-custom="8">
                <h2 class="item-title-main"><i class="fas fa-brain icon-style"></i>機率圖模型 (PGM)</h2>
                <p class="item-title-sub-eng">Probabilistic Graphical Models</p>
                <p class="item-text-primary mb-2">
                    PGM 是一種使用<strong class="text-highlight">圖形</strong>描述<strong class="text-highlight">機率分佈</strong>的方法。
                    圖中<strong class="text-highlight">節點</strong>代表隨機變數，<strong class="text-highlight">邊</strong>代表變數間直接互動。
                </p>
                <div class="mt-4">
                    <h3 class="font-semibold text-f5f5f7">兩種主要方法:</h3>
                    <ul class="list-disc list-inside ml-4 mt-2 item-text-secondary">
                        <li>基於<strong class="text-highlight">有向無環圖 (DAG)</strong> 的模型。</li>
                        <li>基於<strong class="text-highlight">無向圖</strong>的模型。</li>
                    </ul>
                </div>
            </section>

            <section class="bento-item md-col-span-4 lg-col-span-4 highlight-blue-gradient" data-custom="9">
                <h2 class="item-title-main"><i class="fas fa-share-alt icon-style"></i>有向模型：貝氏網路 (BN)</h2>
                <p class="item-title-sub-eng">Directed Models: Bayesian Network</p>
                <p class="item-text-primary mb-3">
                    亦稱<strong class="text-highlight">信念網路</strong>。使用DAG表示變數間條件依賴。每個節點機率基於其父節點。
                </p>
                <div class="flex flex-col md:flex-row items-center justify-around">
                    <div class="mb-4 md:mb-0 md:mr-6 text-center">
                        <h3 class="font-semibold text-f5f5f7 mb-2">範例：學生模型</h3>
                         <svg width="180" height="200" viewBox="0 0 200 220" class="mx-auto">
                            <defs><marker id="arrow-dark" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" class="graph-arrow" /></marker></defs>
                            <g transform="scale(0.9) translate(10,10)">
                                <circle cx="50" cy="30" r="20" fill="#e0e0e0" stroke="#63e6f6" stroke-width="2"/><text x="50" y="35" text-anchor="middle" fill="#1d1d1f" font-size="12">D</text>
                                <circle cx="150" cy="30" r="20" fill="#e0e0e0" stroke="#63e6f6" stroke-width="2"/><text x="150" y="35" text-anchor="middle" fill="#1d1d1f" font-size="12">I</text>
                                <circle cx="100" cy="100" r="20" fill="#e0e0e0" stroke="#63e6f6" stroke-width="2"/><text x="100" y="105" text-anchor="middle" fill="#1d1d1f" font-size="12">G</text>
                                <circle cx="150" cy="170" r="20" fill="#e0e0e0" stroke="#63e6f6" stroke-width="2"/><text x="150" y="175" text-anchor="middle" fill="#1d1d1f" font-size="12">S</text>
                                <circle cx="50" cy="170" r="20" fill="#e0e0e0" stroke="#63e6f6" stroke-width="2"/><text x="50" y="175" text-anchor="middle" fill="#1d1d1f" font-size="12">L</text>
                                <line x1="65" y1="45" x2="85" y2="85" class="graph-edge" marker-end="url(#arrow-dark)"/>
                                <line x1="135" y1="45" x2="115" y2="85" class="graph-edge" marker-end="url(#arrow-dark)"/>
                                <line x1="150" y1="50" x2="150" y2="150" class="graph-edge" marker-end="url(#arrow-dark)"/>
                                <line x1="85" y1="115" x2="65" y2="155" class="graph-edge" marker-end="url(#arrow-dark)"/>
                            </g>
                         </svg>
                         <p class="text-xs text-slate-400 mt-1">D: Difficulty, I: Intelligence, G: Grade, L: Letter, S: SAT</p>
                    </div>
                    <div class="item-text-primary">
                        <h3 class="font-semibold text-f5f5f7 mb-2">鍊式法則</h3>
                        <div class="formula-block text-sm">P(D,I,G,S,L) = P(D)P(I)P(G|I,D)P(S|I)P(L|G)</div>
                        <h3 class="font-semibold text-f5f5f7 mt-3 mb-1">條件機率分佈 (CPD)</h3>
                        <p class="text-xs text-slate-400">每個節點有CPD表定義其在父節點條件下機率。</p>
                    </div>
                </div>
            </section>

            <section class="bento-item md-col-span-2 lg-col-span-2 highlight-green-gradient" data-custom="10">
                <h2 class="item-title-main"><i class="fas fa-arrows-alt-h icon-style"></i>無向模型：馬可夫隨機場 (MRF)</h2>
                 <p class="item-title-sub-eng">Undirected Models: Markov Random Field</p>
                <p class="item-text-primary mb-2">
                    亦稱<strong class="text-highlight">馬可夫網路</strong>。使用無向圖表示變數間對稱關係。適用於互動無明確方向性或雙向影響。
                </p>
                <div class="flex flex-col md:flex-row items-center justify-around">
                    <div class="mb-4 md:mb-0 md:mr-6 text-center">
                         <h3 class="font-semibold text-f5f5f7 mb-2">範例：社交網路</h3>
                         <svg width="130" height="130" viewBox="0 0 150 150" class="mx-auto">
                             <g transform="scale(0.8) translate(18,18)">
                                <circle cx="75" cy="25" r="15" fill="#e0e0e0" stroke="#34d399" stroke-width="2"/><text x="75" y="29" text-anchor="middle" font-size="12" fill="#1d1d1f">A</text>
                                <circle cx="25" cy="75" r="15" fill="#e0e0e0" stroke="#34d399" stroke-width="2"/><text x="25" y="79" text-anchor="middle" font-size="12" fill="#1d1d1f">B</text>
                                <circle cx="125" cy="75" r="15" fill="#e0e0e0" stroke="#34d399" stroke-width="2"/><text x="125" y="79" text-anchor="middle" font-size="12" fill="#1d1d1f">D</text>
                                <circle cx="75" cy="125" r="15" fill="#e0e0e0" stroke="#34d399" stroke-width="2"/><text x="75" y="129" text-anchor="middle" font-size="12" fill="#1d1d1f">C</text>
                                <line x1="75" y1="40" x2="35" y2="65" class="graph-edge"/><line x1="75" y1="40" x2="115" y2="65" class="graph-edge"/>
                                <line x1="35" y1="85" x2="65" y2="115" class="graph-edge"/><line x1="115" y1="85" x2="85" y2="115" class="graph-edge"/>
                            </g>
                         </svg>
                    </div>
                    <div class="item-text-primary text-sm">
                        <h3 class="font-semibold text-f5f5f7 mb-1">核心概念</h3>
                        <ul class="list-disc list-inside space-y-1">
                            <li><strong>因子 (Factors, φ)</strong>: 與邊或團 (Clique) 相關聯。</li>
                            <li>因子將節點賦值對應到非負<strong class="text-highlight">相容性值</strong>。</li>
                        </ul>
                        <h3 class="font-semibold text-f5f5f7 mt-2 mb-1">機率分佈</h3>
                        <div class="formula-block text-xs">P(a,b,c,d) ∝ Π φ<sub>c</sub>(X<sub>c</sub>)</div>
                        <p class="text-xs text-slate-400">需<strong class="text-highlight">配分函數 (Z)</strong> 正規化。</p>
                    </div>
                </div>
            </section>

            <section class="bento-item md-col-span-2 lg-col-span-2 highlight-orange-gradient" data-custom="11">
                <h2 class="item-title-main"><i class="fas fa-cogs icon-style"></i>模型學習與推論</h2>
                <p class="item-title-sub-eng">Learning & Inference</p>
                <div class="space-y-3 item-text-primary text-sm">
                    <div>
                        <h3 class="font-semibold text-f5f5f7">學習 (Learning)</h3>
                        <ul class="list-disc list-inside ml-4">
                            <li>啟發式/貪婪搜索 (Heuristic/Greedy search)</li>
                            <li>潛在變數 (Latent Variables)</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-f5f5f7">推論 (Inference)</h3>
                        <ul class="list-disc list-inside ml-4">
                            <li>精確推論: 列舉法, 變數消去法</li>
                            <li>近似推論: 蒙地卡羅法, 變分法</li>
                        </ul>
                    </div>
                </div>
            </section>

             <section class="bento-item md-col-span-2 lg-col-span-2" data-custom="12">
                <h2 class="item-title-main"><i class="fas fa-dice-d6 icon-style"></i>取樣方法</h2>
                <p class="item-title-sub-eng">Sampling Methods</p>
                <p class="item-text-primary mb-2">從已建立的圖模型中生成樣本數據。</p>
                <ul class="list-disc list-inside space-y-2 item-text-primary">
                    <li>
                        <strong class="font-semibold">祖先取樣 <span class="item-text-secondary">(Ancestral Sampling)</span></strong>
                        <p class="text-xs text-slate-400 ml-5">適用有向圖。從無父節點開始，依拓撲順序取樣。</p>
                    </li>
                    <li>
                        <strong class="font-semibold">吉布斯取樣 <span class="item-text-secondary">(Gibbs Sampling)</span></strong>
                        <p class="text-xs text-slate-400 ml-5">適用複雜模型/無向圖。迭代從給定其他變數下某變數的條件分佈取樣。依賴馬可夫毯。</p>
                    </li>
                </ul>
            </section>

            <section class="bento-item md-col-span-2 lg-col-span-2" data-custom="13">
                 <h2 class="item-title-main"><i class="fas fa-exchange-alt icon-style"></i>圖模型轉換</h2>
                 <p class="item-title-sub-eng">Converting Graph Types</p>
                <p class="item-text-primary mb-3 text-sm">機率分佈無固有方向性，模型選擇影響表示效率與推論複雜度。</p>
                <div class="space-y-3 item-text-primary text-sm">
                    <div>
                        <h3 class="font-semibold text-f5f5f7">有向 <i class="fas fa-arrow-right mx-1"></i> 無向 <span class="item-text-secondary">(Moralization)</span></h3>
                        <ul class="list-decimal list-inside ml-4 text-xs text-slate-400">
                            <li>"Marry parents" (共享子節點的父節點間加無向邊)。</li>
                            <li>移除有向邊方向。</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-f5f5f7">無向 <i class="fas fa-arrow-right mx-1"></i> 有向 <span class="item-text-secondary">(Triangulation)</span></h3>
                         <ul class="list-decimal list-inside ml-4 text-xs text-slate-400">
                            <li>確保長度&gt;=4環路有弦。</li>
                            <li>依節點排序賦予邊方向，避免新V-結構。</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section class="bento-item md-col-span-4 lg-col-span-4" data-custom="14">
                <h2 class="item-title-main"><i class="fas fa-balance-scale icon-style"></i>圖模型 vs 深度學習模型</h2>
                <p class="item-title-sub-eng">PGM vs. Deep Learning Model</p>
                <div class="overflow-x-auto">
                    <table class="table-custom">
                        <thead><tr><th>特性</th><th>機率圖模型 (PGM)</th><th>深度學習模型 (DLM)</th></tr></thead>
                        <tbody>
                            <tr><td>深度</td><td>h<sub>j</sub>到v<sub>i</sub>最短路徑</td><td>多隱藏層</td></tr>
                            <tr><td>隱藏變數</td><td>1-2層</td><td>多層</td></tr>
                            <tr><td>變數序列</td><td>高階匹配特定語義 (時間/語言)</td><td>傾向全連接</td></tr>
                            <tr><td>連接性</td><td>稀疏圖，獨立設計</td><td>常為稠密連接</td></tr>
                            <tr><td>信念傳播</td><td>總是使用</td><td>幾乎不用</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="bento-item md-col-span-4 lg-col-span-4" data-custom="15">
                <h2 class="item-title-main"><i class="fas fa-book icon-style"></i>參考資料</h2>
                <p class="item-title-sub-eng">References</p>
                <ul class="list-disc list-inside item-text-secondary space-y-1 text-xs">
                    <li>Daphne Koller Video: <a href="https://www.youtube.com/watch?v=BODl1rxoT14" class="text-highlight" target="_blank">Introduction to PGM</a> (Hypothetical link)</li>
                    <li>Bishop - Pattern Recognition and Machine Learning</li>
                    <li>Washington University: <a href="https://courses.cs.washington.edu/courses/csep515/11sp/class4-markovnet.pdf" class="text-highlight" target="_blank">Markov Networks</a></li>
                    <li>CMU (E. Xing): <a href="http://www.cs.cmu.edu/~epxing/teaching.html" class="text-highlight" target="_blank">Teaching Page</a></li>
                    <li>UMass (A. McCallum): <a href="https://people.cs.umass.edu/~mccallum/courses/gm2011/05-undirected2.pdf" class="text-highlight" target="_blank">Undirected Graphical Models</a></li>
                    <li>CSDN Blog: <a href="http://blog.csdn.net/aspirinvagrant/article/details/40862237" class="text-highlight" target="_blank">Graphical Models Summary</a></li>
                     <li>YouTube RBM: <a href="https://www.youtube.com/watch?v=p4Vh_zMw-HQ" class="text-highlight" target="_blank">RBM Explained</a> (Hypothetical link)</li>
                </ul>
            </section>

        </main>

        <footer class="text-center py-8 mt-8 border-t border-gray-700">
            <p class="item-text-secondary text-sm">Generated based on video content. Compiled notes © 2024-2025.</p>
        </footer>
    </div>

    <script type="module">
        import { animate } from "framer-motion";

        document.addEventListener('DOMContentLoaded', () => {
            const elementsToAnimate = [
                document.querySelector('header h1.page-main-title'),
                document.querySelector('header p.page-sub-title'),
                document.querySelector('section.text-center h1.section-hero-title'), 
                document.querySelector('section.text-center p.section-hero-english'),
                document.querySelector('section.text-center p.section-hero-presenter'),
                ...document.querySelectorAll('.bento-item')
            ].filter(el => el != null);
            
            elementsToAnimate.forEach((el, index) => {
                let delayOrder = index; 
                if (el.dataset.custom) {
                    delayOrder = parseInt(el.dataset.custom);
                }
                
                const initialY = (el.tagName.startsWith('H') || el.classList.contains('page-main-title') || el.classList.contains('section-hero-title')) ? -20 : 20;
                
                el.style.opacity = 0; 

                const observer = new IntersectionObserver(entries => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            animate(entry.target, 
                                { opacity: [0, 1], y: [initialY, 0] }, 
                                { duration: 0.5, delay: delayOrder * 0.07 } 
                            ).catch(error => {
                                console.error(`Animation error for element:`, entry.target, error);
                            });
                            observer.unobserve(entry.target); 
                        }
                    });
                }, { threshold: 0.05 }); 
                
                observer.observe(el);
            });
        });
    </script>
</body>
</html>
